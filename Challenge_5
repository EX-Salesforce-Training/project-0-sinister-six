/*
We have received new requirements that the data in our org needs to meet new completeness standards. 
To facilitate this we are going to use SOQL to check our data and handle it by setting a default value 
for the phone to be equal to the related account, and create a task if it is missing an email for the record owner to update it.
*/

public class Challenge5 {
    
    public void checkContact() {
    	List<Contact> conList = new List<Contact>();
        List<Task> taskList = new List<Task>();
    	for (contact c : [SELECT phone, email, account.phone FROM contact]) {
        	if (c.phone != c.account.phone) {
            	c.phone = c.account.phone;
                conList.add(c);
        	}
            if (c.email == null) {
               Task newTask = new Task();
               newTask.OwnerId = c.Id;
               newTask.status = 'NA';
               newTask.Priority = 'Low';
               newTask.Subject = 'Please, create an email for your account! Thanks!';
               taskList.add(newTask);
            }
    	}
        update conList;
        insert taskList;
    }
}
