
//Most of the code taken from Harvey Hill during class review on Challenge.

public class ChallengeSix {
    
    
    public void AddAccounts(integer N){
        List<Account> accountsList = new List<Account>();
        for(integer i = 0; i < N; i++){
            Account acc = new Account();
            acc.Name = 'AccountName' + i;
            acc.AnnualRevenue = 100;
            acc.Phone = '9999999999';
            acc.Site = 'www.AccountSite.com';
            accountsList.add(acc);
        }
        insert accountsList;
        AddContacts(accountsList);
    }
    
    public void AddContacts(List<Account> accList){
        List<Contact> contactsList = new List<Contact>();
        for(Account a: accList){
            Contact c = new Contact();
            c.LastName = a.name + 'LastName';
            c.FirstName = 'FirstName';
            c.Phone = '8888888888';
            c.Email = 'www.contactEmail@email.com';
            c.AccountId = a.Id;
            contactsList.add(c);
        }
        
        insert contactsList;
    }
    
    public void UpdateChildContacts(){
        List<Account> accList = [SELECT phone, (SELECT Id, phone FROM Contacts) FROM Account];
        List<Contact> ConList = new List<Contact>();
        for(Account a: AccList){
            if(a.Contacts != null){
            	List<Contact> curContacts = a.Contacts;
            	for(Contact c: curContacts){
                	c.Phone = a.Phone;
                	ConList.add(c);
            	}
            }
        }
        
        update ConList;
    }
    
    public void SystemLog(){
        for(contact c : [SELECT FirstName, LastName, Account.Name, Account.Phone, Account.site FROM Contact]){
            system.debug(c.FirstName + '' + c.LastName + ', FROM:' + c.Account.Name + '. Reachable at: ' + c.Account.Phone + ' and ' + c.Account.Site);
        }
    }

}